(function(a){a.fn.extend({jsPicPlay:function(d){var d=d||{};var c={type:1,intervalTime:3000,speed:400};a.extend(c,d);var b=this.length?this:a(".picPanel");b.each(function(){var e=a(this),o=a(".pic",e),k=a(".num",e),j=a(".txt",e),r="on",g=c.intervalTime,i=c.speed,q=c.type,f=0,n=0;var h=a("ul",o),p=a("li",o),m=a("li",k),s=a("li",j);var l={setStyle:function(){switch(q){case 2:h.css({position:"absolute"});break;default:h.css({position:"absolute",width:p.width()*p.length});p.css({"float":"left"})}},setNum:function(){var t="";for(var u=1;u<p.length+1;u++){t+="<li>"+u+"</li>"}k.append("<ul>"+t+"</ul>");m=a("li",k);m.first().addClass("on")},play:function(){++f>=p.length&&(f=0);switch(q){case 2:h.animate({top:-f*p.height()},i);break;default:h.animate({left:-f*p.width()},i)}m.removeClass(r).eq(f).addClass(r);j.length&&s.eq(f).show().siblings().hide()},start:function(){n=p.length&&setInterval(l.play,3000)},stop:function(){clearInterval(n)}};l.setStyle();o.length&&k.length&&l.setNum();l.start();k.delegate("li","click",function(){l.stop();f=m.index(a(this))-1;l.play();l.start()})});return b}})})(jQuery);
